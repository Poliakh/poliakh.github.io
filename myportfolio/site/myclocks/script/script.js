"use strict";function addNull(e){return e<10&&(e="0"+e),e}function timeNow(e){var t=new Date;switch(e){case"hh":return addNull(t.getHours());case"mm":return addNull(t.getMinutes());case"ss":return addNull(t.getSeconds());case"dd":return t.getDate();case"mon":return t.getMonth();case"ww":return t.getDay()}}function time(){myClock.querySelector(".time__hh").innerHTML=timeNow("hh"),myClock.querySelector(".time__mm").innerHTML=timeNow("mm"),myClock.querySelector(".time__ss").innerHTML=timeNow("ss")}function blink(){myClock.querySelectorAll(".time__point").forEach(function(e){timeNow("ss")%2?e.style.opacity="1":e.style.opacity="0.1"})}function showDate(){var e=["янв","фев","мар","апр","май","июнь","июль","авг","сент","окт","нояб","декаб"],t=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"];myClock.querySelector(".bar__date").innerHTML=timeNow("dd"),myClock.querySelector(".bar__month").innerHTML=e[timeNow("mon")],myClock.querySelector(".bar__week").innerHTML=t[timeNow("ww")]}function replaceDate(){time(),showDate(),blink(),alarm("state")&&alarm()}function alarm(e){return"on"==e&&(alarmFlag=!0),"off"==e&&(alarmFlag=!1),"state"==e?alarmFlag:"idAlarm"==e?idAlarm:(alarmFlag&&timeNow("hh")==alarm_1.getHours()&&timeNow("mm")==alarm_1.getMinutes()&&timeNow("ss")==alarm_1.getSeconds()&&(audio.volume=.4,audio.play(),idAlarm=setInterval(function(){myClock.classList.toggle("clock-active"),myClock.querySelector(".shutUp").classList.toggle("shutUp-active")},500),myClock.querySelector(".shutUp").style.display="block",myClock.addEventListener("click",shutUp)),alarmFlag)}function isTime(e,t){(isNaN(e.value)||e.value>t)&&(e.value="",e.focus()),e.value.length>=2&&(e=e.nextElementSibling,e?e.nextElementSibling.focus():myClock.querySelector(".quest__but").focus())}function barHidden(){myClock.querySelector(".time").style.display="",myClock.querySelector(".inputAlarm").style.display="",myClock.querySelector(".quest").style.display=""}function shutUp(e){e.target.classList.contains("bar__shutUp")&&(clearInterval(alarm("idAlarm")),myClock.classList.remove("clock-active"),myClock.querySelector(".shutUp").classList.remove("shutUp-active"),myClock.querySelector(".shutUp").style.display="",myClock.querySelector(".inst__al").innerHTML="",myClock.querySelector(".inst__al").style.display="",myClock.querySelector(".icon_alr").classList.remove("icon_alr-active"),audio.pause(),alarm("off"))}var audio=new Audio("./audio/audio_alarm.ogg"),alarmFlag;replaceDate(),setInterval("replaceDate()",1e3);var valueInput=function(){alarm_1=new Date;var e=myClock.querySelector(".inputAlarm").querySelectorAll("input"),t=e[0].value||"00",l=e[1].value||"00",a=e[2].value||"00";alarm_1.setHours(t,l,a);var r=myClock.querySelector(".inst__al");r.innerHTML=t+":"+l,r.style.display="block",barHidden(),alarm("on")};myClock.addEventListener("input",function(e){e.target.classList.contains("inputAlarm__hh")&&isTime(e.target,24),e.target.classList.contains("inputAlarm__mm")&&isTime(e.target,60),e.target.classList.contains("inputAlarm__ss")&&isTime(e.target,60)},!0),myClock.addEventListener("dblclick",function(e){e.target.classList.contains("inst__al")&&(barHidden(),myClock.querySelector(".inst__al").innerHTML="",myClock.querySelector(".icon_alr").classList.remove("icon_alr-active"),myClock.querySelector(".inputAlarm").querySelectorAll("input").forEach(function(e){e.value=""}))});var eventButtonBar=function(e){e.target.classList.contains("quest__but")&&+e.target.value?valueInput():(barHidden(),myClock.querySelector(".inst__al").innerHTML||myClock.querySelector(".icon_alr").classList.remove("icon_alr-active"))},questOn=function(){var e=myClock.querySelector(".quest");e.style.display="block",e.addEventListener("click",eventButtonBar)},addAlarm=function(){myClock.querySelector(".time").style.display="none",myClock.querySelector(".inputAlarm").style.display="flex",myClock.querySelector(".icon_alr").classList.add("icon_alr-active"),myClock.querySelector(".inputAlarm__hh").focus(),questOn()};myClock.querySelector(".icon_alr").addEventListener("click",addAlarm),myClock.addEventListener("keypress",function(e){13==e.keyCode&&"INPUT"==e.target.tagName&&valueInput()});